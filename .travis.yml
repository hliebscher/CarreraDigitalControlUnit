language: python

cache:
  directories:
  - "~/.platformio"

install:
- pip install -U platformio
- platformio lib --global install mbino

env:
- PLATFORMIO_CI_SRC=examples/DataLogger
- PLATFORMIO_CI_SRC=examples/StartLight

script:
- platformio ci --board=uno --board=leonardo --lib=".";
  mv "$PLATFORMIO_CI_SRC/"*.ino "$PLATFORMIO_CI_SRC"/$(basename "$PLATFORMIO_CI_SRC"/*.ino .ino).cpp;
  platformio ci --board=nucleo_f446re --lib="src"
